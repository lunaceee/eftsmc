window.__defineBakup=window.define;
window.define=function(a){window.amdShim.define("2013/components/video/oEmbed",["$"],function(c){var b=a.apply(this,arguments);
b.bind(c);
return c
})
};
window.define.amd={};
(function(c,a,d){function b(h,g,f){this.element=h;
this.url=g;
this.$element=$(h);
this.options=f;
this.metadata=this.$element.data("plugin-options")
}b.prototype={defaults:{injectCode:true,beforeEmbed:function(){},afterEmbed:function(){},onProviderNotFound:function(){},onError:function(){},ajaxOptions:{}},providers:[{name:"youtube",type:"video",urlschemes:["youtube\\.com/watch.+v=[\\w-]+&?","youtu\\.be/[\\w-]+"],apiendpoint:c.location.protocol+"//www.youtube.com/oembed?scheme="+c.location.protocol.replace(":","")+"&"},{name:"vimeo",type:"video",urlschemes:["www.vimeo.com/groups/.*/videos/.*","www.vimeo.com/.*","vimeo.com/groups/.*/videos/.*","vimeo.com/.*"],apiendpoint:c.location.protocol+"//vimeo.com/api/oembed.json?"}],init:function(){this.config=$.extend({},this.defaults,this.options,this.metadata);
var f=this.$element,g=(this.url&&(!this.url.indexOf("http://")||!this.url.indexOf("https://")))?this.url:f.attr("data-url"),h;
if(g!==null&&g!==d){h=this.getOEmbedProvider(g);
if(h!==null){this.getOEmbedCode(f,g,h)
}else{this.config.onProviderNotFound.call(f,g)
}}return this
},getOEmbedProvider:function(m){for(var k=0;
k<this.providers.length;
k++){for(var h=0,f=this.providers[k].urlschemes.length;
h<f;
h++){var g=new RegExp(this.providers[k].urlschemes[h],"i");
if(m.match(g)!==null){return this.providers[k]
}}}return null
},getOEmbedCode:function(g,j,l){var f=this;
var i=l.apiendpoint+"format=json&url="+j;
var k='SELECT * FROM json WHERE url="'+(i)+'"';
var h=$.extend({url:"//query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{q:k,format:"json",env:"store://datatables.org/alltableswithkeys",callback:"?"},success:function(m){f.config.beforeEmbed.call(g,m);
f.onSuccess(m.query.results.json,j,g,l);
f.config.afterEmbed.call(g,m)
},error:this.config.onError.call(g,j,l)},this.config.ajaxOptions||{});
$.ajax(h)
},onSuccess:function(i,l,g,m){if(i===null){return
}var j=$(i.html);
var n=j.prop("tagName").toLowerCase();
if(this.config.injectCode===true){if(n=="iframe"){var f=j.attr("src");
if(m.name=="youtube"){var h=f.split("?");
if(h[1]==null){h[1]=""
}h[1]+="&wmode=opaque";
f=h.join("?")
}j.attr("data-src",f).removeAttr("src")
}}else{if(typeof this.config.injectCode=="function"){this.config.injectCode.call(g,i);
return
}}g.wrap('<div class="video-container"></div>');
var k=g.parent();
k.append(j)
}};
b.defaults=b.prototype.defaults;
function e(f){f.fn.oEmbed=function(h,g){return this.each(function(){new b(this,h,g).init()
})
}
}b.bind=e;
if(c.define&&c.define.amd!=null){define(function(){return b
})
}if(c.jQuery){b.bind(c.jQuery)
}})(window,document);
window.define=window.__defineBakup;